<!DOCTYPE html>
<html>

<head>
	<title>WKT Plotter</title>
	<meta charset="UTF-8">

	<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
	<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
	<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
	<link rel="manifest" href="/site.webmanifest">

	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.6.0/css/all.min.css" />

	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>

	<link rel="stylesheet" href="http://ajax.googleapis.com/ajax/libs/jqueryui/1.14.1/themes/base/jquery-ui.css"
		type="text/css" media="all" />
	<script src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.14.1/jquery-ui.min.js" type="text/javascript"></script>

	<script src="https://cdn.jsdelivr.net/npm/js-md5@2.5.0/build/md5.min.js"></script>

	<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js"></script>

	<script src="https://unpkg.com/dom-to-image@2.6.0/dist/dom-to-image.min.js"></script>

	<script src="https://unpkg.com/terraformer@1.0.12/terraformer.js"></script>
	<script src="https://unpkg.com/terraformer-wkt-parser@1.2.0/terraformer-wkt-parser.js"></script>

	<script src="https://cdn.jsdelivr.net/npm/jsts@2.11.0/dist/jsts.min.js"></script>
	<!-- <script src="https://cdn.jsdelivr.net/npm/@turf/turf@6/turf.min.js"></script> -->

	<!-- Openlayers -->
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/ol@latest/ol.css" />
	<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/ol@latest/dist/ol.js"></script>
	<script src="https://unpkg.com/@babel/polyfill@7.12.1/dist/polyfill.min.js?features=requestAnimationFrame,Element.prototype.classList,URL">		</script>

	<!-- ol-ext -->
	<link rel="stylesheet" href="https://cdn.rawgit.com/Viglino/ol-ext/master/dist/ol-ext.min.css" />
	<script type="text/javascript" src="https://cdn.rawgit.com/Viglino/ol-ext/master/dist/ol-ext.min.js"></script>

	<link href="/main.css" version rel="stylesheet">
	<link href="/map.css" version rel="stylesheet">
	<link href="/controls.css" version rel="stylesheet">

	<script type="module">
		console.log("Iniciando carregamento do WKTapp.js...");
		const version = new Date().getTime();

		document.querySelectorAll('link[version]').forEach(el => {
			const url = new URL(el.href || el.src, location.href);
			url.searchParams.set('v', version);
			if (el.href) el.href = url;
			if (el.src) el.src = url;
			el.removeAttribute('version');
		});

		import(`./WKTapp.js?v=${version}`)
			.then(module => {
				console.log("WKTapp.js carregado com sucesso às", new Date().toLocaleTimeString());
			})
			.catch(err => {
				console.error("Erro ao carregar WKTapp.js:", err);
			});

	</script>

	<!-- Google tag (gtag.js) -->
	<script async src="https://www.googletagmanager.com/gtag/js?id=G-HQWSTRZMSN"></script>
	<script>
		window.dataLayer = window.dataLayer || [];
		function gtag() { dataLayer.push(arguments); }
		gtag('js', new Date());
		gtag('config', 'G-HQWSTRZMSN');
	</script>
</head>

<body>
	<div id="header" class="flex-none grow-0">
		<img src="logo.svg?v=202412062200" title="WKT Plotter" width="160" height="50">
		<button id="settings-btn" class="" type="button" title="Settings"><i class="fa-solid fa-gear fa-lg"></i></button>
	</div>
	<div id="wrapper">
		<div id="map" class="map" style="z-index: 0"></div>
		<div id="tooltip" class="ol-tooltip hidden"></div>
		<div id="controls">
			<div class="tabs" style="display: none">
				<div class="tab-buttons">
					<button data-tab="importContainer" class="active">Import</button>
					<button data-tab="settingsContainer">Settings</button>
				</div>
			</div>
			<div class="tab-content">
				<div id="importContainer" class="tab-pane active">
					<form>
						<div id="wktdefault" class='wkt-container'>
							<div class="wkt-input-wrapper">
								<textarea placeholder="Cole ou importe um WKT aqui..." rows="6" data-i18n-placeholder="textarea-placeholder"></textarea>
							</div>
							<div class="actions-container">
								<button id="import-wkt-btn" type="button">
									<i class="fa-solid fa-paste"></i>
									<span data-i18n="import">Importar</span>
								</button>

								<button id="clear-selection-btn" type="button" class="hidden">
									<i class="fa-solid fa-ban"></i>
									<span data-i18n="clear-selection">Desselecionar</span>
								</button>

								<button id="copy-selected-btn" type="button" class="hidden">
									<i class="fa-regular fa-copy"></i>
									<span data-i18n="copy-selected">Copiar</span>
									<span class="button-count"><span id="selected-count">0</span></span>
								</button>
							</div>
						</div>
					</form>
					<ul id="wkt-list"></ul>
				</div>
				<div id="settingsContainer" class="settings tab-pane">
					<form id="light-form">
						<div class="settings-item">
							<label for="language" data-i18n="language">Idioma</label>
							<select id="language">
								<option value="pt">Português</option>
								<option value="en">English</option>
								<option value="es">Español</option>
								<option value="fr">Français</option>
							</select>
						</div>
						<div class="settings-item">
							<input type="checkbox" id="show-area">
							<label for="show-area" data-i18n="show-area">Mostrar Área</label>
						</div>
						<div class="settings-item">
							<input type="checkbox" id="wkt-persistent">
							<label for="wkt-persistent" data-i18n="persistent-objects">Reter Objectos</label>
						</div>
						<div class="settings-item">
							<input type="checkbox" id="multi-select">
							<label for="multi-select" data-i18n="multi-select">Multi-Seleção (Ctrl+Click)</label>
						</div>
						<div class="settings-item">
							<input type="checkbox" id="multi-select-union">
							<label for="multi-select-union" data-i18n="union-multi-select">Unir Multi-Seleção</label>
						</div>
					</form>
					<div class="actions-container">
						<button id="settings-close-btn" type="button">
							<i class="fa-solid fa-xmark"></i>
							<span data-i18n="close">Fechar</span>
						</button>
					</div>
				</div>
			</div>
		</div>
	</div>
</body>

</html>